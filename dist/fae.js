var t="1.4.1",e="junebloom/fae";function s(){const s=`%cfae â™¥ ${t}%c https://github.com/${e} `;globalThis.document?console.log(s,"\n        background: #aaf;\n        color: white;\n        padding: 4px 10px;\n        border-radius: 30px;\n      ","color: #aaf;"):console.log(s.replace(/%c/,"[35m[1m").replace(/%c/,"[0m[35m")+"[0m")}class o{constructor(){this.events=new Map}on(t,e,s){let o=this.events.get(t);return o||(o=new Map,this.events.set(t,o)),o.set(e,s),this}removeListener(t,e){const s=this.events.get(t);if(s)return s.delete(e),0===s.size&&this.events.delete(t),this}emit(t,...e){const s=this.events.get(t);s&&s.forEach((t,s)=>{s.apply(t,e)})}}function r(){if(globalThis.performance)return performance.now()/1e3;{const t=process.hrtime();return t[0]+t[1]/1e9}}function n(t){let e,s,o=r();function n(){e=r(),s=e-o,o=e,t.event.emit("update",s),t.event.emit("draw")}globalThis.requestAnimationFrame?requestAnimationFrame((function t(){n(),requestAnimationFrame(t)})):setInterval(n,1e3/60)}var i={Application:class{constructor(t=n){this.event=new o,this.systems=new Set,this.groups={},this.createGroup("all"),t(this),setTimeout(()=>{this.hideBanner||s()},0)}createGroup(t){return this.groups[t]=new Set,this.groups[t]}entitiesWith(...t){for(const e of t)if(!this.groups[e])return[];t.sort((t,e)=>this.groups[t].size-this.groups[e].size);const e=[];for(const s of this.groups[t[0]])s.hasGroups(...t)&&e.push(s);return e}startSystem(t){this.systems.add(t);for(const e in t.listeners)this.event.on(e,t.listeners[e],t);return t}stopSystem(t){this.systems.delete(t);for(const e in t.listeners)this.event.removeListener(e,t.listeners[e])}clear(t=!1){for(const e of this.systems)e.persistent&&!t||this.stopSystem(e);for(const e of this.groups.all)e.persistent&&!t||e.destroy()}},Entity:class{constructor(t){this.app=t,this.groups=new Set,this.group("all")}attach(...t){for(const e of t)this[e.key]=e,this.group(e.key),e.componentWasAttached&&e.componentWasAttached(this);return this}detach(...t){for(const e of t){if(this[e.key]!==e)throw new Error("component is not attached to this entity");e.componentWillBeDetached&&e.componentWillBeDetached(this),this.ungroup(e.key),this[e.key]=null}return this}group(...t){for(const e of t)(this.app.groups[e]||this.app.createGroup(e)).add(this),this.groups.add(e);return this}ungroup(...t){for(const e of t)this.app.groups[e]&&(this.app.groups[e].delete(this),this.groups.delete(e));return this}hasGroups(...t){for(const e of t)if(!this.groups.has(e))return!1;return!0}getComponents(){const t=[];for(const[e,s]of Object.entries(this))s&&s.key&&s.key===e&&this.groups.has(e)&&t.push(s);return t}destroy(){this.detach(...this.getComponents()),this.ungroup(...this.groups),this.destroyed=!0}},utils:{getTime:r,logBanner:s}};export default i;
//# sourceMappingURL=fae.js.map
