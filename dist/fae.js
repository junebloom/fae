/**
 * MIT License
 *
 * Copyright (c) 2017 Sam Woodruff
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.fae=e()}(this,function(){"use strict";function t(){console.log("%cfae â™¥ "+o+"%c https://github.com/sambrosia/fae ","\n    background: #aaf;\n    color: white;\n    line-height: 39px;\n    padding: 4px 10px;\n    border-radius: 30px;\n  ","color: #aaf;")}function e(){if(global.window)return window.performance.now()/1e3;var t=process.hrtime();return t[0]+t[1]/1e9}function n(t){function n(){t.event.emit("preupdate");var s=e();o=s-r,r=s,t.event.emit("update",o),t.event.emit("draw"),global.window&&window.requestAnimationFrame(n)}var r=e(),o=0;global.window?n():setInterval(n,1e3/60)}var r=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t){function e(){}function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(){this._events=new e,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,s="~";Object.create&&(e.prototype=Object.create(null),(new e).__proto__||(s=!1)),r.prototype.eventNames=function(){var t,e,n=this,r=[];if(0===this._eventsCount)return r;for(e in t=n._events)o.call(t,e)&&r.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},r.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},r.prototype.emit=function(t,e,n,r,o,i){var a=arguments,p=this,u=s?s+t:t;if(!this._events[u])return!1;var h,f,c=this._events[u],v=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),v){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,i),!0}for(f=1,h=new Array(v-1);f<v;f++)h[f-1]=a[f];c.fn.apply(c.context,h)}else{var l,g=c.length;for(f=0;f<g;f++)switch(c[f].once&&p.removeListener(t,c[f].fn,void 0,!0),v){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,e);break;case 3:c[f].fn.call(c[f].context,e,n);break;case 4:c[f].fn.call(c[f].context,e,n,r);break;default:if(!h)for(l=1,h=new Array(v-1);l<v;l++)h[l-1]=a[l];c[f].fn.apply(c[f].context,h)}}return!0},r.prototype.on=function(t,e,r){var o=new n(e,r||this),i=s?s+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):(this._events[i]=o,this._eventsCount++),this},r.prototype.once=function(t,e,r){var o=new n(e,r||this,!0),i=s?s+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):(this._events[i]=o,this._eventsCount++),this},r.prototype.removeListener=function(t,n,r,o){var i=s?s+t:t;if(!this._events[i])return this;if(!n)return 0==--this._eventsCount?this._events=new e:delete this._events[i],this;var a=this._events[i];if(a.fn)a.fn!==n||o&&!a.once||r&&a.context!==r||(0==--this._eventsCount?this._events=new e:delete this._events[i]);else{for(var p=0,u=[],h=a.length;p<h;p++)(a[p].fn!==n||o&&!a[p].once||r&&a[p].context!==r)&&u.push(a[p]);u.length?this._events[i]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new e:delete this._events[i]}return this},r.prototype.removeAllListeners=function(t){var n;return t?(n=s?s+t:t,this._events[n]&&(0==--this._eventsCount?this._events=new e:delete this._events[n])):(this._events=new e,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=s,r.EventEmitter=r,t.exports=r}),o="1.2.1",s=function(e){void 0===e&&(e=n),this.event=new r,this.systems=new Set,this.groups={all:new Set},e(this),t()};s.prototype.entitiesWith=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];e.sort(function(e,n){return t.groups[e].size-t.groups[n].size});for(var r=[],o=0,s=t.groups[e[0]];o<s.length;o+=1){var i=s[o];i.hasGroups.apply(i,e)&&r.push(i)}return r},s.prototype.startSystem=function(t){var e=this;this.systems.add(t);for(var n in t.listeners)e.event.on(n,t.listeners[n],t);return t},s.prototype.stopSystem=function(t){var e=this;this.systems.delete(t);for(var n in t.listeners)e.event.removeListener(n,t.listeners[n],t)},s.prototype.clear=function(t){var e=this;void 0===t&&(t=!1);for(var n=0,r=e.systems;n<r.length;n+=1){var o=r[n];o.persistent&&!t||e.stopSystem(o)}for(var s=0,i=e.groups.all;s<i.length;s+=1){var a=i[s];a.persistent&&!t||a.destroy()}};var i=function(t){this.app=t,this.groups=new Set,this.group("all")};return i.prototype.attach=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0,o=e;r<o.length;r+=1){var s=o[r],i=Object.getPrototypeOf(s).constructor.name;t[i]=s,t.group(i),s.entity=t}return this},i.prototype.attachProperties=function(t){var e=this;for(var n in t)e[n]=t[n],e.group(n),"object"==typeof t[n]&&(t[n].entity=e);return this},i.prototype.detach=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0,o=e;r<o.length;r+=1){var s=o[r];t[s]=null,t.ungroup(s)}return this},i.prototype.group=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0,o=e;r<o.length;r+=1){var s=o[r];t.app.groups[s]||(t.app.groups[s]=new Set),t.app.groups[s].add(t),t.groups.add(s)}return this},i.prototype.ungroup=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0,o=e;r<o.length;r+=1){var s=o[r];t.app.groups[s].delete(t),t.groups.delete(s)}return this},i.prototype.hasGroups=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0,o=e;r<o.length;r+=1){var s=o[r];if(!t.groups.has(s))return!1}return!0},i.prototype.destroy=function(){var t=this;this.destroyed=!0;for(var e=0,n=t.groups;e<n.length;e+=1){var r=n[e];t.ungroup(r)}},{Application:s,Entity:i,utils:{logBanner:t}}});
//# sourceMappingURL=fae.js.map
