var t="1.4.1",e="junebloom/fae";function s(){const s=`%cfae â™¥ ${t}%c https://github.com/${e} `;globalThis.document?console.log(s,"\n        background: #aaf;\n        color: white;\n        padding: 4px 10px;\n        border-radius: 30px;\n      ","color: #aaf;"):console.log(s.replace(/%c/,"[35m[1m").replace(/%c/,"[0m[35m")+"[0m")}class i{constructor(){this.events=new Map}addListener(t,e,...s){let i=this.events.get(t);return i||(i=new Map,this.events.set(t,i)),i.set(e,s),this}removeListener(t,e){const s=this.events.get(t);if(s)return s.delete(e),0===s.size&&this.events.delete(t),this}emit(t,...e){const s=this.events.get(t);s&&s.forEach((t,s)=>{s.call(void 0,...t,...e)})}}function n(){if(globalThis.performance)return performance.now()/1e3;{const t=process.hrtime();return t[0]+t[1]/1e9}}function o(t){let e,s,i=n();function o(){e=n(),s=e-i,i=e,t.event.emit("update",s),t.event.emit("draw")}globalThis.requestAnimationFrame?requestAnimationFrame((function t(){o(),requestAnimationFrame(t)})):setInterval(o,1e3/60)}var r={Application:class{constructor({hideBanner:t=!1,startGame:e=o}){this.event=new i,this.systems=new Set,this.groups={},this.createGroup("all"),e(this),t||s()}createGroup(t){return this.groups[t]=new Set,this.groups[t]}entitiesWith(...t){for(const e of t)if(!this.groups[e])return[];t.sort((t,e)=>this.groups[t].size-this.groups[e].size);const e=[];for(const s of this.groups[t[0]])s.hasGroups(...t)&&e.push(s);return e}startSystem(t){const e=[t.event,t.action,this];if(t.init){const s=t.init(this);void 0!==s&&e.push(s)}this.systems.add(t),this.event.addListener(...e)}stopSystem(t){this.event.removeListener(t.event,t.action),this.systems.delete(t),t.exit&&t.exit(this)}clear(t=!1){for(const e of this.systems)e.persistent&&!t||this.stopSystem(e);for(const e of this.groups.all)e.persistent&&!t||e.destroy()}},Entity:class{constructor(t){this.collection=t,this.components=new Map,this.tags=new Set,this.tag("all")}attach(t,...e){return this[t.key]=t.init(this,...e),this.components.set(t.key,t),this.tag(t.key),this}detach(t){const{exit:e}=this.components.get(t);return this[t]=void 0,this.components.delete(t),this.untag(t),e&&e(this),this}tag(t){return this.tags.add(t),this.collection.index(t).set.add(this),this}untag(t){return this.tags.delete(t),this.collection.index(t).set.delete(this),this}destroy(){this.components.values().forEach(({exit:t})=>{t&&t(this)}),this.tags.forEach(t=>this.collection.index(t).set.delete(this)),this.destroyed=!0}},utils:{getTime:n,logBanner:s}};export default r;
//# sourceMappingURL=fae.js.map
